const API_URL="https://6311e835f5cba498da8807bf.mockapi.io/hw25/students/",headerColumns=["Name","h1","h2","h3","h4","h5","h6","h7","h8","h9","h10","DEL"],renderTable=e=>{const t=document.getElementById(e);t.innerHTML="",t.append(createTableHeader(headerColumns)),getUsers().then((n=>{n.map((n=>t.append(userRowRender(n,deleteUser,updateUser,renderTable,e))))}))};async function getUsers(){return await(await fetch(`${API_URL}`)).json()}async function deleteUser(e){return await fetch(`${API_URL}${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},mode:"cors"})}async function updateUser(e){const t={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"cors"};return await fetch(`${API_URL}${e.id}`,t)}async function addUser(e){const t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"cors"};return await fetch(`${API_URL}`,t)}function createTableHeader(e){const t=document.createElement("tr");return e.map((e=>{const n=document.createElement("th");n.innerText=e,t.append(n)})),t}renderTable("users-list"),document.body.append(addUserForm(addUser,renderTable,"users-list"));const userRowRender=(e,t,n,a,r)=>{const s=document.createElement("tr"),d=document.createElement("td");d.innerText=e.name,s.append(d),e.marks.map(((t,d)=>{const o=document.createElement("td"),c=document.createElement("input");c.setAttribute("type","number"),c.addEventListener("blur",(t=>{e.marks[d]=t.target.value,n(e).then((e=>{e.status>=200&&e.status<400&&a(r)}))})),c.value=t,o.append(c),s.append(o)}));const o=document.createElement("td"),c=document.createElement("button");return c.innerText="del",c.addEventListener("click",(n=>{n.preventDefault(),t(e.id).then((e=>{e.status>=200&&e.status<400&&(console.log(e.status),a(r))}))})),o.append(c),s.append(o),s};function addUserForm(e,t,n){const a=document.createElement("form"),r=document.createElement("input");r.setAttribute("name","name"),r.setAttribute("required",!0);const s=document.createElement("button");return s.innerText="add",s.addEventListener("click",(r=>{r.preventDefault(),e({name:a.name.value,marks:Array.from({length:10},(()=>0))}).then((e=>{e.status>=200&&e.status<400&&(console.log(e.status),t(n))}))})),a.append(r),a.append(s),a}